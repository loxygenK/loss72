+++
title = "ブログサイトを新装しました"
tag = ["new-site"]
date = "2024/12/01"
+++

フライさんです。

今回、ブログサイトを新しく作り直してみたので、そのテストを兼ねて、紹介をさせていただこうと思います。

# 今回のブログサイトの技術概要

Next.js や Astro などのフレームワークには載せず、Markdown から HTML を吐くプログラムを Rust で書いてみました。
主に以下の crate に遺存しています。

- :package: [**`markdown`**](https://crates.io/crates/markdown/1.0.0-alpha.21) … Markdown を解析してもらい、フロントマターの読み込みと HTML の生成をしています。
- :smile: [**`emojis`**](https://crates.io/crates/emojis) … `markdown` crate だけでは絵文字のパースに非対応なので、 shortcode (`:sparkles:` みたいなやつ) を
  Twemoji の SVG に変換するという処理をしています。

**特段説明することは以上で、シンプルに収まっているのではないかと思います!**

その他の特徴として……

- JavaScript は今回絡めませんでした。
    - なので、ブラウザ上で JavaScript を切っても正しく表示されます。
    - サーバ側の処理（HTML 生成処理など）も JavaScript を絡めていません。
- Static site をビルドしているので、一度 HTML を生成してしまえば、あとは HTML を serve するだけでデプロイができます。

# モチベ

### 前のブログサイトが使いにくかった

前回作ったブログサイトは、書く側的に、結構使いにくいところがありました。

主にしんどかったのが **構造が不必要に複雑になってしまっている** という点でした。
実現したかった内容が、「Markdown をパースして、目次と各記事のページを作る」という

### 環境の使い方で詰まった
前のサイトでは、`next-mdx-remote` とかにお世話になりながら Markdown のパース等をしているのですが、
私がそういったライブラリを完全に理解しておらず、環境の使い方で詰まることが多かったです。

一番大きいのが、執筆中の記事の再ビルドがうまくいかないという点です。Markdown ドキュメントを更新しても、
記事が再ビルドされたり、あるいはされなかったりと、あまり気持ちよく記事を書けるような状態ではありませんでした。

### 構造が不必要に複雑になってしまっている
前のサイトは Next.js の上に載せていtたのですが、「Markdown 記事をパースして、目次と各記事のページを作る」という
やりたいことに対して、コードベースや処理内容が結構複雑になってしまっていました。

ブログサイトでは、Interactivity やリクエスト毎のサーバ側処理とかは特段必要ない一方で、
そういう機能を便利に使えるというのが大きな嬉しみの 1 つとしてある Next.js の上に載せているというのは、
今考えてみると、技術スタックと要件がミスマッチしてしまってるなあという印象を受けます。


# Simple is best - JavaScript いらない?

上で述べたつらみを解消するために、もっと軽い Vite とか、Markdown からページ生成まで全部やってくれる Astro とかを
使うのが良さそうだと考え、しばらくはそっちを検討していました。

が、ふと気づいて、「クライアント側での Interactivity が必要ないなら、JavaScript の上に載せることなくない?」



